{"name":"Server","tagline":"gcm","body":"<!DOCTYPE html> \r\n<html> \r\n    <head> \r\n        <title></title> \r\n        <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"> \r\n        <script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js\"></script> \r\n        <script type=\"text/javascript\"> \r\n            $(document).ready(function(){ \r\n\r\n            }); \r\n            function sendPushNotification(id){ \r\n                var data = $('form#'+id).serialize(); \r\n                $('form#'+id).unbind('submit');                 \r\n                $.ajax({ \r\n                    url: \"enviar_mensaje.php\", \r\n                    type: 'GET', \r\n                    data: data, \r\n                    beforeSend: function() { \r\n                         \r\n                    }, \r\n                    success: function(data, textStatus, xhr) { \r\n                          $('.txt_message').val(\"\"); \r\n                          alert(\"Notificación enviada\"); \r\n                    }, \r\n                    error: function(xhr, textStatus, errorThrown) { \r\n                        alert(\"Error\"); \r\n                        console.log(xhr); \r\n                    } \r\n                }); \r\n                return false; \r\n            } \r\n        </script> \r\n        <style type=\"text/css\"> \r\n            .container{ \r\n                width: auto; \r\n                max-width: 900px; \r\n                min-width: 400px; \r\n                margin: 0 auto; \r\n                padding: 0; \r\n            } \r\n            h1{ \r\n                font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; \r\n                font-size: 24px; \r\n                color: #fff; \r\n                background: #3498db; \r\n                padding: 10px; \r\n                box-shadow: 10px 10px 5px #888888; \r\n                text-shadow: 1px 1px #444; \r\n            } \r\n            div.clear{ \r\n                clear: both; \r\n            } \r\n            ul.devices{ \r\n                margin: 0; \r\n                padding: 0; \r\n            } \r\n            ul.devices li{ \r\n                float: left; \r\n                list-style: none; \r\n                border: 1px solid #dedede; \r\n                padding: 10px; \r\n                margin: 0 15px 25px 0; \r\n                border-radius: 3px; \r\n                -webkit-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.35); \r\n                -moz-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.35); \r\n                box-shadow: 0 1px 5px rgba(0, 0, 0, 0.35); \r\n                font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; \r\n                color: #555; \r\n            } \r\n            ul.devices li label, ul.devices li span{ \r\n                font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; \r\n                font-size: 12px; \r\n                font-style: normal; \r\n                font-variant: normal; \r\n                font-weight: bold; \r\n                color: #393939; \r\n                display: block; \r\n                float: left; \r\n            } \r\n            ul.devices li label{ \r\n                height: 25px; \r\n                width: 50px;                 \r\n            } \r\n            ul.devices li textarea{ \r\n                float: left; \r\n                resize: none; \r\n            } \r\n            ul.devices li .send_btn{ \r\n                background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#0096FF), to(#005DFF)); \r\n                background: -webkit-linear-gradient(0% 0%, 0% 100%, from(#0096FF), to(#005DFF)); \r\n                background: -moz-linear-gradient(center top, #0096FF, #005DFF); \r\n                background: linear-gradient(#0096FF, #005DFF); \r\n                text-shadow: 0 1px 0 rgba(0, 0, 0, 0.3); \r\n                border-radius: 3px; \r\n                color: #fff; \r\n            } \r\n        </style> \r\n    </head> \r\n    <body> \r\n        <?php \r\n        include_once 'funciones.php'; \r\n        $db = new DB_Functions(); \r\n        $users = $db->getAllUsers(); \r\n        if ($users != false) \r\n            $no_of_users = mysql_num_rows($users); \r\n        else \r\n            $no_of_users = 0; \r\n        ?> \r\n        <div class=\"container\"> \r\n            <h1>N° de dispositivos registrados: <?php echo $no_of_users; ?></h1> \r\n            <hr/> \r\n            <ul class=\"devices\"> \r\n                <?php \r\n                if ($no_of_users > 0) { \r\n                    ?> \r\n                    <?php \r\n                    while ($row = mysql_fetch_array($users)) { \r\n                        ?> \r\n                        <li> \r\n                            <form id=\"<?php echo $row[\"id\"] ?>\" name=\"\" method=\"post\" onsubmit=\"return sendPushNotification('<?php echo $row[\"id\"] ?>')\"> \r\n                                <label>Name: </label> <span><?php echo $row[\"name\"] ?></span> \r\n                                <div class=\"clear\"></div> \r\n                                <label>Email:</label> <span><?php echo $row[\"email\"] ?></span> \r\n                                <div class=\"clear\"></div> \r\n                                <div class=\"send_container\">                                 \r\n                                    <textarea rows=\"3\" name=\"message\" cols=\"25\" class=\"txt_message\" placeholder=\"Type message here\"></textarea> \r\n                                    <input type=\"hidden\" name=\"regId\" value=\"<?php echo $row[\"gcm_regid\"] ?>\"/> \r\n                                    <input type=\"submit\" class=\"send_btn\" value=\"Send\" onclick=\"\"/> \r\n                                </div> \r\n                            </form> \r\n                        </li> \r\n                    <?php } \r\n                } else { ?> \r\n                    <li> \r\n                        Aun no hay usuarios registrados! \r\n                    </li> \r\n                <?php } ?> \r\n            </ul> \r\n        </div> \r\n    </body> \r\n</html>","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}